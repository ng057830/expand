<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Juego de Matemáticas: Propiedad Distributiva</title>
    <!-- KaTeX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-w86E+R+9T31jj9sFUBgZMJZthci9dV9uECWv0p3AzsUwRjVgH1wW5yZ4YVt+Bf3j" crossorigin="anonymous">
    <!-- KaTeX JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-Bu3aRBcxiOeyJZ42b4E5cVQ+uE4SxUqKNUyNqFzLkky7x74bCK1zGmco3c/ccJyx" crossorigin="anonymous"></script>
    <!-- Auto-render extension -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" integrity="sha384-mlkHut/6nLA0ZjnGF0GN6blE8YLTvZngh4SLGdsyY3fV3JeZ31aSWvJWK5yQWImP" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .game-container {
            max-width: 800px;
            margin: auto;
        }
        .question {
            margin-bottom: 30px;
        }
        .question h3 {
            font-size: 1.2em;
        }
        .options {
            margin-bottom: 10px;
        }
        .options label {
            display: block;
            margin-bottom: 5px;
        }
        .hint {
            color: blue;
            margin-top: 10px;
        }
        .correct {
            color: green;
            font-weight: bold;
            margin-top: 10px;
        }
        .incorrect {
            color: red;
            font-weight: bold;
            margin-top: 10px;
        }
        button {
            padding: 8px 12px;
            font-size: 1em;
            margin-top: 10px;
        }
        .hidden {
            display: none;
        }
        .progress {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Juego de Matemáticas: Propiedad Distributiva</h1>
        <div id="game"></div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body);

            const gameData = [
                // Pregunta 1
                {
                    question: "¿Cuál es el **monomio** en la expresión $$ 3x \\cdot (2xy + 4y - 5) $$?",
                    type: "checkbox",
                    options: ["$$3x$$", "$$2xy$$", "$$4y$$", "$$-5$$"],
                    correctAnswer: [0],
                    hints: [
                        "Un monomio es una expresión algebraica con un solo término.",
                        "Busca el término que está fuera del paréntesis.",
                        "El monomio es el que se va a distribuir en la expresión.",
                        "Es el término que multiplica al polinomio dentro del paréntesis."
                    ]
                },
                // Pregunta 2
                {
                    question: "¿Cuántos términos tiene el **polinomio** $$ 2xy + 4y - 5 $$?",
                    type: "combobox",
                    options: ["1 término", "2 términos", "3 términos", "4 términos"],
                    correctAnswer: [2],
                    hints: [
                        "Los términos en un polinomio están separados por signos de suma (+) o resta (-).",
                        "Cuenta los signos de suma y resta para determinar el número de términos.",
                        "Cada término es una parte separada por + o -.",
                        "Observa que hay dos signos (+ y -), lo que indica el número de separaciones entre términos."
                    ]
                },
                // Pregunta 3
                {
                    question: "¿Cuáles son las variables en el monomio $$ 3x $$?",
                    type: "checkbox",
                    options: ["$$x$$", "$$y$$", "$$x$$ y $$y$$", "No tiene variables"],
                    correctAnswer: [0],
                    hints: [
                        "La variable es la letra que acompaña al número.",
                        "En $$3x$$, ¿qué letra acompaña al número?",
                        "Busca la letra que está presente en el monomio.",
                        "Recuerda que $$3x$$ significa 3 multiplicado por una variable."
                    ]
                },
                // Pregunta 4
                {
                    question: "¿Cuál es el coeficiente en $$ 3x $$?",
                    type: "textbox",
                    correctAnswer: ["3"],
                    hints: [
                        "El coeficiente es el número que multiplica a la variable.",
                        "Es el número que está directamente antes de la letra $$x$$.",
                        "En $$3x$$, ¿qué número está multiplicando a $$x$$?",
                        "El coeficiente es 3 en este caso."
                    ]
                },
                // Pregunta 5
                {
                    question: "¿Cuál es el coeficiente en $$ 2xy $$?",
                    type: "textbox",
                    correctAnswer: ["2"],
                    hints: [
                        "El coeficiente es el número que multiplica a las variables.",
                        "En $$2xy$$, es el número antes de las letras $$x$$ y $$y$$.",
                        "¿Qué número está multiplicando a $$x$$ y $$y$$?",
                        "El coeficiente es 2."
                    ]
                },
                // Pregunta 6
                {
                    question: "¿Cuál es el signo en $$ 3x $$?",
                    type: "combobox",
                    options: ["Positivo (+)", "Negativo (-)", "No tiene signo"],
                    correctAnswer: [0],
                    hints: [
                        "Si no hay un signo negativo, entonces es positivo.",
                        "El signo positivo puede no estar escrito explícitamente.",
                        "En ausencia de un signo, asumimos que es positivo.",
                        "El signo es positivo."
                    ]
                },
                // Pregunta 7
                {
                    question: "¿Cuál es el signo en $$ 2xy $$?",
                    type: "combobox",
                    options: ["Positivo (+)", "Negativo (-)", "No tiene signo"],
                    correctAnswer: [0],
                    hints: [
                        "Si no hay un signo negativo, entonces es positivo.",
                        "El signo positivo puede no estar escrito explícitamente.",
                        "En ausencia de un signo, asumimos que es positivo.",
                        "El signo es positivo."
                    ]
                },
                // Pregunta 8
                {
                    question: "Si multiplicas un número positivo por otro número positivo, ¿qué signo tendrá el resultado?",
                    type: "checkbox",
                    options: ["Positivo", "Negativo", "Depende del número", "Ninguno"],
                    correctAnswer: [0],
                    hints: [
                        "Multiplicar dos números positivos siempre da un resultado positivo.",
                        "Piensa en multiplicar 2 por 3, el resultado es positivo.",
                        "Los signos iguales dan positivo al multiplicar.",
                        "El resultado será positivo."
                    ]
                },
                // Pregunta 9
                {
                    question: "Multiplica los coeficientes $$ 3 $$ y $$ 2 $$. ¿Cuál es el resultado?",
                    type: "textbox",
                    correctAnswer: ["6"],
                    hints: [
                        "Multiplica 3 por 2.",
                        "3 x 2 = 6.",
                        "El resultado de 3 multiplicado por 2 es 6.",
                        "El resultado es 6."
                    ]
                },
                // Pregunta 10
                {
                    question: "Multiplica las variables $$ x \\cdot x $$. ¿Cuál es el resultado?",
                    type: "textbox",
                    correctAnswer: ["x^2", "x²", "x2"],
                    hints: [
                        "Cuando multiplicas una variable por sí misma, elevas al cuadrado.",
                        "$$ x \\cdot x = x^2 $$.",
                        "El resultado es $$ x $$ al cuadrado.",
                        "Escribe $$ x^2 $$."
                    ]
                },
                // Pregunta 11
                {
                    question: "¿Cuál es el resultado completo de multiplicar $$ 3x \\cdot 2xy $$?",
                    type: "textbox",
                    correctAnswer: ["6x^2y", "6x²y", "6x2y"],
                    hints: [
                        "Combina los coeficientes y las variables multiplicadas.",
                        "El coeficiente es 6, las variables son $$ x^2y $$.",
                        "El resultado es $$ 6x^2y $$.",
                        "Escribe $$ 6x^2y $$."
                    ]
                },
                // Pregunta 12
                {
                    question: "¿Cuál es el signo en $$ 3x $$?",
                    type: "combobox",
                    options: ["Positivo", "Negativo"],
                    correctAnswer: [0],
                    hints: [
                        "Si no hay un signo negativo, entonces es positivo.",
                        "El signo positivo puede no estar escrito explícitamente.",
                        "En ausencia de un signo, asumimos que es positivo.",
                        "El signo es positivo."
                    ]
                },
                // Pregunta 13
                {
                    question: "¿Cuál es el signo en $$ 4y $$?",
                    type: "combobox",
                    options: ["Positivo", "Negativo", "No tiene signo"],
                    correctAnswer: [0],
                    hints: [
                        "Si no hay un signo negativo, entonces es positivo.",
                        "El signo positivo puede no estar escrito explícitamente.",
                        "En ausencia de un signo, asumimos que es positivo.",
                        "El signo es positivo."
                    ]
                },
                // Pregunta 14
                {
                    question: "Multiplica los coeficientes $$ 3 $$ y $$ 4 $$. ¿Cuál es el resultado?",
                    type: "textbox",
                    correctAnswer: ["12"],
                    hints: [
                        "Multiplica 3 por 4.",
                        "3 x 4 = 12.",
                        "El resultado de 3 multiplicado por 4 es 12.",
                        "El resultado es 12."
                    ]
                },
                // Pregunta 15
                {
                    question: "¿Cuál es el resultado de multiplicar $$ x \\cdot y $$?",
                    type: "textbox",
                    correctAnswer: ["xy", "yx"],
                    hints: [
                        "Las variables diferentes se multiplican y se escriben juntas.",
                        "$$ x \\cdot y = xy $$.",
                        "El resultado es $$ xy $$.",
                        "Escribe $$ xy $$."
                    ]
                },
                // Pregunta 16
                {
                    question: "¿Cuál es el resultado completo de multiplicar $$ 3x \\cdot 4y $$?",
                    type: "textbox",
                    correctAnswer: ["12xy"],
                    hints: [
                        "Combina los coeficientes y las variables multiplicadas.",
                        "El coeficiente es 12, las variables son $$ xy $$.",
                        "El resultado es $$ 12xy $$.",
                        "Escribe $$ 12xy $$."
                    ]
                },
                // Pregunta 17
                {
                    question: "¿Cuál es el signo en $$ 3x $$?",
                    type: "combobox",
                    options: ["Positivo", "Negativo"],
                    correctAnswer: [0],
                    hints: [
                        "Si no hay un signo negativo, entonces es positivo.",
                        "El signo positivo puede no estar escrito explícitamente.",
                        "En ausencia de un signo, asumimos que es positivo.",
                        "El signo es positivo."
                    ]
                },
                // Pregunta 18
                {
                    question: "¿Cuál es el signo en $$ -5 $$?",
                    type: "combobox",
                    options: ["Positivo", "Negativo"],
                    correctAnswer: [1],
                    hints: [
                        "El número tiene un signo negativo delante.",
                        "El signo negativo está indicado por el símbolo '-'.",
                        "El número es negativo.",
                        "El signo es negativo."
                    ]
                },
                // Pregunta 19
                {
                    question: "Si multiplicas un número positivo por un número negativo, ¿qué signo tendrá el resultado?",
                    type: "combobox",
                    options: ["Negativo", "Positivo"],
                    correctAnswer: [0],
                    hints: [
                        "Multiplicar números con signos diferentes da un resultado negativo.",
                        "Un positivo por un negativo es negativo.",
                        "El resultado será negativo.",
                        "El signo es negativo."
                    ]
                },
                // Pregunta 20
                {
                    question: "Multiplica los coeficientes $$ 3 $$ y $$ -5 $$. ¿Cuál es el resultado?",
                    type: "textbox",
                    correctAnswer: ["-15"],
                    hints: [
                        "Multiplica 3 por -5.",
                        "3 x (-5) = -15.",
                        "El resultado de 3 multiplicado por -5 es -15.",
                        "El resultado es -15."
                    ]
                },
                // Pregunta 21
                {
                    question: "¿Cuál es el resultado completo de multiplicar $$ 3x \\cdot (-5) $$?",
                    type: "textbox",
                    correctAnswer: ["-15x"],
                    hints: [
                        "Combina el coeficiente y la variable.",
                        "El coeficiente es -15, la variable es $$ x $$.",
                        "El resultado es $$ -15x $$.",
                        "Escribe $$ -15x $$."
                    ]
                },
                // Pregunta 22
                {
                    question: "Ahora que tienes todos los términos, ¿cuáles son los resultados que obtuviste de las multiplicaciones?",
                    type: "checkbox",
                    options: ["$$6x^2y$$, $$12xy$$, $$-15x$$", "$$5xy$$, $$12xy$$, $$15x$$", "$$6xy$$, $$12xy$$, $$-15x$$", "$$6x^2y$$, $$12x$$, $$15x$$"],
                    correctAnswer: [0],
                    hints: [
                        "Revisa cada uno de los resultados obtenidos previamente.",
                        "Los resultados fueron $$6x^2y$$, $$12xy$$ y $$-15x$$.",
                        "La opción correcta incluye estos tres términos.",
                        "Selecciona la opción con $$6x^2y$$, $$12xy$$, $$-15x$$."
                    ]
                },
                // Pregunta 23
                {
                    question: "¿Puedes combinar alguno de estos términos? (Considera las variables y los exponentes)",
                    type: "checkbox",
                    options: ["No, no se pueden combinar", "Sí, puedo combinar dos de ellos", "Sí, puedo combinarlos todos", "Solo puedo combinar los que tienen $$ x $$"],
                    correctAnswer: [0],
                    hints: [
                        "Para combinar términos, deben tener las mismas variables y exponentes.",
                        "Revisa si los términos tienen exactamente las mismas variables.",
                        "$$6x^2y$$, $$12xy$$ y $$-15x$$ son diferentes.",
                        "No se pueden combinar."
                    ]
                },
                // Pregunta 24
                {
                    question: "¿Cuál es la expresión final después de multiplicar $$ 3x \\cdot (2xy + 4y - 5) $$?",
                    type: "checkbox",
                    options: ["$$6x^2y + 12xy - 15x$$", "$$6xy + 12xy - 15x$$", "$$5xy + 10xy - 15$$", "$$6x^2 + 12xy + 15x$$"],
                    correctAnswer: [0],
                    hints: [
                        "La suma de los términos obtenidos es $$6x^2y + 12xy - 15x$$.",
                        "Reúne los tres resultados que obtuviste.",
                        "La opción correcta incluye los tres términos con sus signos.",
                        "Selecciona la opción $$6x^2y + 12xy - 15x$$."
                    ]
                }
            ];

            let currentQuestionIndex = 0;
            let attempt = 0;

            function loadQuestion() {
                const gameDiv = document.getElementById("game");
                gameDiv.innerHTML = "";

                if (currentQuestionIndex >= gameData.length) {
                    gameDiv.innerHTML = "<h2>¡Has completado la actividad! 🎉</h2>";
                    return;
                }

                const questionData = gameData[currentQuestionIndex];
                const questionDiv = document.createElement("div");
                questionDiv.className = "question";

                const progressDiv = document.createElement("div");
                progressDiv.className = "progress";
                progressDiv.textContent = `Pregunta ${currentQuestionIndex + 1} de ${gameData.length}`;
                questionDiv.appendChild(progressDiv);

                const questionText = document.createElement("h3");
                questionText.innerHTML = questionData.question;
                questionDiv.appendChild(questionText);

                const optionsDiv = document.createElement("div");
                optionsDiv.className = "options";

                if (questionData.type === "checkbox") {
                    questionData.options.forEach((optionText, index) => {
                        const label = document.createElement("label");
                        const input = document.createElement("input");
                        input.type = "radio";
                        input.name = "option";
                        input.value = index;
                        label.appendChild(input);
                        const optionSpan = document.createElement("span");
                        optionSpan.innerHTML = " " + optionText;
                        label.appendChild(optionSpan);
                        optionsDiv.appendChild(label);
                    });
                } else if (questionData.type === "combobox") {
                    const select = document.createElement("select");
                    select.id = "selectOption";
                    questionData.options.forEach((optionText, index) => {
                        const option = document.createElement("option");
                        option.value = index;
                        option.text = optionText;
                        select.appendChild(option);
                    });
                    optionsDiv.appendChild(select);
                } else if (questionData.type === "textbox") {
                    const input = document.createElement("input");
                    input.type = "text";
                    input.id = "textInput";
                    optionsDiv.appendChild(input);
                }

                questionDiv.appendChild(optionsDiv);

                const feedbackDiv = document.createElement("div");
                feedbackDiv.id = "feedback";
                questionDiv.appendChild(feedbackDiv);

                const submitButton = document.createElement("button");
                submitButton.textContent = "Enviar";
                submitButton.onclick = checkAnswer;
                questionDiv.appendChild(submitButton);

                gameDiv.appendChild(questionDiv);

                renderMathInElement(gameDiv);
            }

            function normalizeAnswer(answer) {
                return answer.replace(/\s+/g, '').toLowerCase();
            }

            function checkAnswer() {
                const questionData = gameData[currentQuestionIndex];
                const feedbackDiv = document.getElementById("feedback");
                feedbackDiv.innerHTML = "";

                let userAnswer = null;
                if (questionData.type === "checkbox") {
                    const options = document.getElementsByName("option");
                    options.forEach(option => {
                        if (option.checked) {
                            userAnswer = parseInt(option.value);
                        }
                    });
                } else if (questionData.type === "combobox") {
                    const select = document.getElementById("selectOption");
                    userAnswer = parseInt(select.value);
                } else if (questionData.type === "textbox") {
                    const input = document.getElementById("textInput");
                    userAnswer = normalizeAnswer(input.value.trim());
                }

                let isCorrect = false;
                if (questionData.type === "textbox") {
                    isCorrect = questionData.correctAnswer.some(ans => normalizeAnswer(ans) === userAnswer);
                } else {
                    isCorrect = questionData.correctAnswer.includes(userAnswer);
                }

                if (isCorrect) {
                    feedbackDiv.innerHTML = "<p class='correct'>¡Correcto! 😊</p>";
                    currentQuestionIndex++;
                    attempt = 0;
                    setTimeout(loadQuestion, 1500);
                } else {
                    if (attempt < questionData.hints.length) {
                        feedbackDiv.innerHTML = "<p class='hint'>Pista: " + questionData.hints[attempt] + "</p>";
                        attempt++;
                    } else {
                        feedbackDiv.innerHTML = "<p class='incorrect'>Incorrecto. Por favor, inténtalo de nuevo.</p>";
                    }
                }

                renderMathInElement(feedbackDiv);
            }

            // Inicializa el juego cargando la primera pregunta
            loadQuestion();
        });
    </script>
    <!-- KaTeX Auto-render -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\\(", right: "\\)", display: false},
                    {left: "\\[", right: "\\]", display: true}
                ]
            });
        });
    </script>
</body>
</html>
